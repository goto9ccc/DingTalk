@{
    Layout = null;
}

<!--右侧实体内容-->
<el-main id="partPage" style="position:relative;">
    <div class="head-fixed" onclick="loadPage('/Main/approval')">
        <i class="el-icon-arrow-left"></i>
        下发图纸
    </div>

    <div>
        <span>项目名称</span>
        <el-select v-model="project" v-on:change="selectProject">
            <el-option v-for="item in projectList"
                       :key="item"
                       :label="item"
                       :value="item">
            </el-option>
        </el-select>
    </div>

    <el-table :data="data5"
              style="width: 100%">
        <el-table-column type="expand">
            <template slot-scope="props">
                @*<el-form label-position="left" inline class="demo-table-expand">
                    <el-form-item label="商品名称">
                        <span>{{ props.row.label }}</span>
                    </el-form-item>
                </el-form>*@
                <el-collapse accordion>
                    <el-collapse-item v-for="flows in props.row.children" :key="flows.id">
                        <template slot="title">
                            <span>工序名称：</span>
                            <el-button type="primary" plain size="mini">{{flows.label}}</el-button>
                            <el-button size="mini" v-on:click="deleteFlow()" type="danger" class="tableRight">删除流程</el-button>
                            <el-button size="mini" v-on:click="deleteFlow()" class="tableRight">添加工作</el-button>
                        </template>
                        <el-form v-for="flow in flows.children" :key="flow.id" :inline="true" class="demo-form-inline form" size="mini">
                            <el-form-item label="执行人">
                                <el-input v-model="flow.label" :placeholder="flow.label" style="width:100px;"></el-input>
                            </el-form-item>
                            <el-form-item label="开始日期">
                                <el-date-picker v-model="flow.id"
                                                type="daterange"
                                                :picker-options="pickerOptions"
                                                range-separator="至"
                                                start-placeholder="开始日期"
                                                end-placeholder="结束日期">
                                </el-date-picker>
                            </el-form-item>
                            <el-form-item>
                                <el-button type="danger" v-on:click="deleteWork">删除工作</el-button>
                            </el-form-item>
                        </el-form>
                    </el-collapse-item>
                </el-collapse>
            </template>
        </el-table-column>
        <el-table-column label="零件编号"
                         prop="id">
        </el-table-column>
        <el-table-column label="零件名称"
                         prop="label">
        </el-table-column>
        <el-table-column label="操作">
            <template slot-scope="scope">
                <el-button size="mini"
                           v-on:click="addFlow(scope.$index, scope.row)">添加流程</el-button>
            </template>
        </el-table-column>
    </el-table>

</el-main>

<script>
    let itemId = 1000
    var demo = new Vue({
        el: "#partPage",
        mixins: [mixin],
        data: function () {
            const data = [{
                id: 1,
                label: '一级 1',
                children: [{
                    id: 4,
                    label: '二级 1-1',
                    children: [{
                        id: 9,
                        label: '三级 1-1-1'
                    }, {
                        id: 10,
                        label: '三级 1-1-2'
                    }]
                }]
            }, {
                id: 2,
                label: '一级 2',
                children: [{
                    id: 5,
                    label: '二级 2-1'
                }, {
                    id: 6,
                    label: '二级 2-2'
                }]
            }, {
                id: 3,
                label: '一级 3',
                children: [{
                    id: 7,
                    label: '二级 3-1'
                }, {
                    id: 8,
                    label: '二级 3-2'
                }]
            }]
            return {
                projectList: ['1','22','333'],
                project: '',
                data5: JSON.parse(JSON.stringify(data)),
                ruleForm: {
                    name: '',
                    reson: '',
                }
            }
        },
        methods: {
            onSubmit() {
                console.log('submit!');
            },
            selectProject(project) {

            },
            addFlow(index,row){

            },
            deleteFlow() {
                
            },
            addWork() {

            },
            deleteWork() {

            }
        },
        created: function () {
            loadHtml("mainPage", "partPage")
        }
    })


</script>



