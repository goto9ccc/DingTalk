@{
    Layout = null;
}

<!--右侧实体内容-->
<el-main id="partPage" style="position:relative;">
    <div class="head-fixed" onclick="loadPage('/Main/approval')">
        <i class="el-icon-arrow-left"></i>
        上传图纸
    </div>
    <!--表格實體-->
    <el-table :data="tableData" stripe border>
        <el-table-column prop="name" label="审批标题" width="120">
        </el-table-column>
        <el-table-column prop="address" label="审批摘要">
        </el-table-column>
        <el-table-column prop="date" label="发起时间" width="140">
        </el-table-column>
        <el-table-column prop="date" label="完成时间" width="140">
        </el-table-column>
        <el-table-column prop="address" label="状态">
        </el-table-column>
    </el-table>
    <!--底部翻頁-->
    <div style="text-align:right">
        <el-pagination v-on:size-change="handleSizeChange"
                       v-on:current-change="handleCurrentChange"
                       :current-page="currentPage"
                       :page-sizes="[1, 3, 5, 10]"
                       :page-size="5"
                       layout="total, sizes, prev, pager, next, jumper"
                       :total="10">
        </el-pagination>
    </div>
    <!--上传表單-->
    <el-upload class="upload-demo"
                action="/drawingupload/Upload"
                :on-preview="handlePreview"
                :on-remove="handleRemove"
                :on-success="handleSuccess"
                :before-remove="beforeRemove"
                multiple
                :limit="3"
                :on-exceed="handleExceed"
                :file-list="fileList">
        <el-button size="small" type="primary">点击上传</el-button>
        <div slot="tip" class="el-upload__tip">只能上传excel文件，且不超过500kb</div>
    </el-upload>
</el-main>

<script>
    var demo = new Vue({
        el: "#partPage",
        mixins: [mixin],
        data: function () {
            return {
                fileList: [],
                tableData: tableData,
                currentPage: 1,
                formInline: {
                    user: '',
                    region: '',
                    startDate: '',
                    endDate: '',
                    state: 0
                }
            }
        },
        methods: {
            //上传文件方法
            handleSuccess(response, file, fileList) {
                console.log(response,file, fileList);
            },
            handleRemove(file, fileList) {
                console.log(file, fileList);
            },
            handlePreview(file) {
                console.log(file);
            },
            handleExceed(files, fileList) {
                this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);
            },
            beforeRemove(file, fileList) {
                return this.$confirm(`确定移除 ${file.name}？`);
            },
            //翻頁相關事件
            handleSizeChange(val) {
                console.log(`每页 ${val} 条`);
            },
            handleCurrentChange(val) {
                console.log(`当前页: ${val}`);
            }
        },
        created: function () {
            loadHtml("mainPage", "partPage")
        }
    })
</script>

<style>
    .upload-demo{
        width:400px;
    }
</style>

